<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Кот ловит мышей - Мобильная версия</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(45deg, #8B4513, #A0522D);
            overflow: hidden;
            cursor: none;
            touch-action: none;
        }

        .game-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            background: 
                repeating-linear-gradient(
                    0deg,
                    #8B4513 0px,
                    #A0522D 2px,
                    #CD853F 4px,
                    #DEB887 6px,
                    #D2B48C 8px,
                    #8B4513 120px
                ),
                repeating-linear-gradient(
                    90deg,
                    rgba(139, 69, 19, 0.8) 0px,
                    rgba(160, 82, 45, 0.8) 15px,
                    rgba(205, 133, 63, 0.8) 30px,
                    rgba(222, 184, 135, 0.8) 45px,
                    rgba(210, 180, 140, 0.8) 60px,
                    rgba(139, 69, 19, 0.8) 150px
                );
            background-size: 120px 120px, 150px 150px;
            animation: floorShine 4s ease-in-out infinite alternate;
        }

        .game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(0, 0, 0, 0.2) 1px,
                    transparent 2px,
                    transparent 120px
                ),
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    rgba(0, 0, 0, 0.15) 1px,
                    transparent 3px,
                    transparent 150px
                ),
                radial-gradient(ellipse at 20% 30%, rgba(0, 0, 0, 0.1) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 70%, rgba(0, 0, 0, 0.1) 0%, transparent 60%);
            pointer-events: none;
        }

        .ui-panel {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            flex-wrap: wrap;
            gap: 10px;
        }

        .score {
            background: rgba(139, 69, 19, 0.95);
            color: #F5DEB3;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid #DEB887;
        }

        .game-title {
            color: #F5DEB3;
            font-size: 16px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .instructions {
            position: fixed;
            bottom: 10px;
            left: 10px;
            right: 10px;
            background: rgba(139, 69, 19, 0.9);
            color: #F5DEB3;
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
            text-align: center;
            z-index: 1000;
            animation: fadeInOut 6s ease-in-out;
        }

        .cat {
            position: absolute;
            width: 80px;
            height: 90px;
            transition: all 0.15s ease;
            z-index: 100;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
            animation: catFloat 2s ease-in-out infinite;
        }

        .cat svg {
            width: 100%;
            height: 100%;
        }

        .mouse {
            position: absolute;
            width: 32px;
            height: 32px;
            z-index: 50;
            animation: mouseMove 2.5s linear infinite;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));
        }

        .mouse-body {
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at 40% 30%, #E5E5E5, #B8B8B8, #8C8C8C, #696969);
            border-radius: 55% 45% 45% 55%;
            position: relative;
            border: 1px solid #5A5A5A;
        }

        .mouse-ears {
            position: absolute;
            top: -5px;
            left: 7px;
        }

        .mouse-ear {
            width: 10px;
            height: 10px;
            background: radial-gradient(circle at 30% 30%, #E5E5E5, #B8B8B8, #8C8C8C);
            border-radius: 50%;
            position: absolute;
            border: 1px solid #5A5A5A;
        }

        .mouse-ear::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #FFB6C1, #FF69B4);
            border-radius: 50%;
        }

        .mouse-ear:first-child {
            left: 0;
        }

        .mouse-ear:last-child {
            left: 6px;
        }

        .mouse-tail {
            position: absolute;
            width: 2px;
            height: 24px;
            background: linear-gradient(to bottom, #B8B8B8, #8C8C8C, #696969);
            border-radius: 2px;
            right: -1px;
            top: 10px;
            transform-origin: top;
            animation: mouseTailWag 1.8s ease-in-out infinite alternate;
            border: 1px solid #5A5A5A;
        }

        .mouse-eyes {
            position: absolute;
            top: 7px;
            left: 10px;
            display: flex;
            gap: 3px;
        }

        .mouse-eye {
            width: 3px;
            height: 3px;
            background: radial-gradient(circle, #000, #333);
            border-radius: 50%;
            animation: mouseBlink 3.5s infinite;
        }

        .mouse-nose {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 2px;
            background: #FF69B4;
            border-radius: 50%;
        }

        .mouse-whiskers {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 26px;
            height: 8px;
        }

        .mouse-whisker {
            position: absolute;
            width: 10px;
            height: 0.5px;
            background: #444;
            border-radius: 1px;
        }

        .mouse-whisker:nth-child(1) { top: 2px; left: 0; transform: rotate(-10deg); }
        .mouse-whisker:nth-child(2) { top: 4px; left: 1px; transform: rotate(-3deg); }
        .mouse-whisker:nth-child(3) { top: 2px; right: 0; transform: rotate(10deg); }
        .mouse-whisker:nth-child(4) { top: 4px; right: 1px; transform: rotate(3deg); }

        .catch-effect {
            position: absolute;
            width: 50px;
            height: 50px;
            border: 3px solid #FFD700;
            border-radius: 50%;
            animation: catchEffect 0.5s ease-out;
            pointer-events: none;
            z-index: 200;
        }

        .touch-indicator {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
            animation: touchPulse 0.3s ease-out;
            pointer-events: none;
            z-index: 150;
        }

        @keyframes floorShine {
            0% { filter: brightness(0.9); }
            100% { filter: brightness(1.1); }
        }

        @keyframes catFloat {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-3px) scale(1.02); }
        }

        @keyframes mouseMove {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-2px); }
        }

        @keyframes mouseTailWag {
            0% { transform: rotate(-10deg); }
            100% { transform: rotate(10deg); }
        }

        @keyframes mouseBlink {
            0%, 92%, 100% { transform: scaleY(1); }
            96% { transform: scaleY(0.1); }
        }

        @keyframes catchEffect {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        @keyframes touchPulse {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        @keyframes fadeInOut {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* Адаптация для больших экранов */
        @media (min-width: 768px) {
            .score {
                font-size: 20px;
                padding: 15px 25px;
            }
            
            .game-title {
                font-size: 18px;
            }
            
            .cat {
                width: 90px;
                height: 100px;
            }
            
            .mouse {
                width: 35px;
                height: 35px;
            }
        }

        /* Адаптация для маленьких экранов */
        @media (max-width: 480px) {
            .ui-panel {
                flex-direction: column;
                align-items: center;
            }
            
            .score {
                font-size: 16px;
                padding: 10px 16px;
            }
            
            .game-title {
                font-size: 14px;
            }
            
            .instructions {
                font-size: 12px;
                padding: 8px;
            }

            .cat {
                width: 70px;
                height: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container" id="gameContainer">
        <div class="ui-panel">
            <div class="score">Мыши: <span id="scoreValue">0</span></div>
            <div class="game-title">🐱 Охота за мышами 🐭</div>
        </div>
        
        <div class="instructions" id="instructions">
            📱 Касайтесь экрана, чтобы переместить кота и поймать мышей!
        </div>
        
        <div class="cat" id="cat">
            <svg width="200" height="180" viewBox="0 0 200 180" xmlns="http://www.w3.org/2000/svg">
                <!-- Тень -->
                <ellipse cx="100" cy="165" rx="35" ry="6" fill="rgba(0,0,0,0.1)"/>
                
                <!-- Голова -->
                <ellipse cx="100" cy="90" rx="50" ry="45" fill="white" stroke="#DDD" stroke-width="1"/>
                
                <!-- Оранжевое пятно на левом ухе и голове -->
                <path d="M65 60 Q70 45 85 50 Q90 55 85 70 Q75 75 65 70 Z" fill="#FF8C42"/>
                
                <!-- Коричневое пятно справа -->
                <path d="M115 55 Q130 50 135 65 Q140 80 125 85 Q115 80 115 70 Z" fill="#8B4513"/>
                
                <!-- Маленькое оранжевое пятнышко -->
                <ellipse cx="110" cy="75" rx="8" ry="6" fill="#FF8C42"/>
                
                <!-- Уши -->
                <ellipse cx="70" cy="55" rx="15" ry="25" fill="white" stroke="#DDD" stroke-width="1" transform="rotate(-20 70 55)"/>
                <ellipse cx="130" cy="55" rx="15" ry="25" fill="white" stroke="#DDD" stroke-width="1" transform="rotate(20 130 55)"/>
                
                <!-- Оранжевая часть левого уха -->
                <ellipse cx="70" cy="50" rx="12" ry="20" fill="#FF8C42" transform="rotate(-20 70 50)"/>
                
                <!-- Коричневая часть правого уха -->
                <ellipse cx="130" cy="50" rx="12" ry="20" fill="#8B4513" transform="rotate(20 130 50)"/>
                
                <!-- Внутренняя часть ушей -->
                <ellipse cx="70" cy="55" rx="6" ry="12" fill="#FFB3C1" transform="rotate(-20 70 55)"/>
                <ellipse cx="130" cy="55" rx="6" ry="12" fill="#FFB3C1" transform="rotate(20 130 55)"/>
                
                <!-- Закрытые глазки (улыбающиеся дуги) -->
                <path d="M80 85 Q85 90 90 85" fill="none" stroke="#333" stroke-width="3" stroke-linecap="round">
                    <animate attributeName="d" values="M80 85 Q85 90 90 85;M80 87 Q85 88 90 87;M80 85 Q85 90 90 85" dur="4s" repeatCount="indefinite"/>
                </path>
                <path d="M110 85 Q115 90 120 85" fill="none" stroke="#333" stroke-width="3" stroke-linecap="round">
                    <animate attributeName="d" values="M110 85 Q115 90 120 85;M110 87 Q115 88 120 87;M110 85 Q115 90 120 85" dur="4s" repeatCount="indefinite"/>
                </path>
                
                <!-- Носик -->
                <path d="M97 95 L100 100 L103 95 Q100 92 97 95" fill="#FF9999"/>
                
                <!-- Улыбающийся ротик -->
                <path d="M100 100 Q95 105 88 102" fill="none" stroke="#FF9999" stroke-width="2" stroke-linecap="round"/>
                <path d="M100 100 Q105 105 112 102" fill="none" stroke="#FF9999" stroke-width="2" stroke-linecap="round"/>
                
                <!-- Щёчки (розовые кружочки) -->
                <circle cx="65" cy="100" r="8" fill="#FFB3C1" opacity="0.6"/>
                <circle cx="135" cy="100" r="8" fill="#FFB3C1" opacity="0.6"/>
                
                <!-- Передние лапки -->
                <ellipse cx="75" cy="140" rx="12" ry="18" fill="white" stroke="#DDD" stroke-width="1"/>
                <ellipse cx="125" cy="140" rx="12" ry="18" fill="white" stroke="#DDD" stroke-width="1"/>
                
                <!-- Розовые подушечки на лапках -->
                <ellipse cx="75" cy="150" rx="8" ry="6" fill="#FFB3C1"/>
                <ellipse cx="125" cy="150" rx="8" ry="6" fill="#FFB3C1"/>
                
                <!-- Пальчики на лапках -->
                <circle cx="70" cy="148" r="2.5" fill="#FFB3C1"/>
                <circle cx="75" cy="145" r="2" fill="#FFB3C1"/>
                <circle cx="80" cy="148" r="2.5" fill="#FFB3C1"/>
                
                <circle cx="120" cy="148" r="2.5" fill="#FFB3C1"/>
                <circle cx="125" cy="145" r="2" fill="#FFB3C1"/>
                <circle cx="130" cy="148" r="2.5" fill="#FFB3C1"/>
                
                <!-- Маленькое коричневое пятнышко на мордочке -->
                <ellipse cx="90" cy="88" rx="3" ry="2" fill="#8B4513"/>
                
                <!-- Усики -->
                <line x1="60" y1="95" x2="45" y2="90" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="60" y1="100" x2="45" y2="100" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="60" y1="105" x2="45" y2="110" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                
                <line x1="140" y1="95" x2="155" y2="90" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="140" y1="100" x2="155" y2="100" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="140" y1="105" x2="155" y2="110" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </div>
    </div>

    <script>
        const gameContainer = document.getElementById('gameContainer');
        const cat = document.getElementById('cat');
        const scoreElement = document.getElementById('scoreValue');
        const instructions = document.getElementById('instructions');
        
        let score = 0;
        let mice = [];
        let catPosition = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
        let isMoving = false;

        // Устанавливаем начальную позицию кота
        updateCatPosition();

        // Убираем инструкции через 6 секунд
        setTimeout(() => {
            if (instructions) {
                instructions.style.display = 'none';
            }
        }, 6000);

        // Обработка касаний
        function handleTouch(e) {
            e.preventDefault();
            
            const touch = e.touches ? e.touches[0] : e;
            const rect = gameContainer.getBoundingClientRect();
            
            const targetX = touch.clientX - rect.left - 40; // центрируем кота
            const targetY = touch.clientY - rect.top - 45;
            
            // Ограничиваем позицию кота границами экрана
            catPosition.x = Math.max(0, Math.min(window.innerWidth - 80, targetX));
            catPosition.y = Math.max(0, Math.min(window.innerHeight - 90, targetY));
            
            updateCatPosition();
            createTouchIndicator(touch.clientX - rect.left, touch.clientY - rect.top);
        }

        // События для касаний
        gameContainer.addEventListener('touchstart', handleTouch, { passive: false });
        gameContainer.addEventListener('touchmove', handleTouch, { passive: false });

        // Поддержка мыши для тестирования на компьютере
        gameContainer.addEventListener('mousedown', (e) => {
            isMoving = true;
            handleTouch(e);
        });

        gameContainer.addEventListener('mousemove', (e) => {
            if (isMoving) {
                handleTouch(e);
            }
        });

        gameContainer.addEventListener('mouseup', () => {
            isMoving = false;
        });

        function updateCatPosition() {
            cat.style.left = catPosition.x + 'px';
            cat.style.top = catPosition.y + 'px';
        }

        function createTouchIndicator(x, y) {
            const indicator = document.createElement('div');
            indicator.className = 'touch-indicator';
            indicator.style.left = (x - 20) + 'px';
            indicator.style.top = (y - 20) + 'px';
            gameContainer.appendChild(indicator);
            
            setTimeout(() => {
                if (gameContainer.contains(indicator)) {
                    gameContainer.removeChild(indicator);
                }
            }, 300);
        }

        function createMouse() {
            const mouse = document.createElement('div');
            mouse.className = 'mouse';
            
            // Случайная позиция для мыши с отступом от краев
            const margin = 50;
            const x = Math.random() * (window.innerWidth - 32 - margin * 2) + margin;
            const y = Math.random() * (window.innerHeight - 32 - margin * 2) + margin;
            
            mouse.style.left = x + 'px';
            mouse.style.top = y + 'px';
            
            mouse.innerHTML = `
                <div class="mouse-body">
                    <div class="mouse-ears">
                        <div class="mouse-ear"></div>
                        <div class="mouse-ear"></div>
                    </div>
                    <div class="mouse-eyes">
                        <div class="mouse-eye"></div>
                        <div class="mouse-eye"></div>
                    </div>
                    <div class="mouse-nose"></div>
                    <div class="mouse-whiskers">
                        <div class="mouse-whisker"></div>
                        <div class="mouse-whisker"></div>
                        <div class="mouse-whisker"></div>
                        <div class="mouse-whisker"></div>
                    </div>
                    <div class="mouse-tail"></div>
                </div>
            `;
            
            gameContainer.appendChild(mouse);
            mice.push({
                element: mouse,
                x: x,
                y: y
            });

            // Удаляем мышь через 10 секунд, если её не поймали
            setTimeout(() => {
                if (gameContainer.contains(mouse)) {
                    gameContainer.removeChild(mouse);
                    mice = mice.filter(m => m.element !== mouse);
                }
            }, 10000);
        }

        function checkCollisions() {
            mice.forEach((mouse, index) => {
                const mouseRect = mouse.element.getBoundingClientRect();
                const catRect = cat.getBoundingClientRect();
                
                // Увеличенная зона захвата для мобильных устройств
                const tolerance = 15;
                
                if (catRect.left < mouseRect.right + tolerance &&
                    catRect.right > mouseRect.left - tolerance &&
                    catRect.top < mouseRect.bottom + tolerance &&
                    catRect.bottom > mouseRect.top - tolerance) {
                    
                    // Создаем эффект поимки
                    createCatchEffect(mouseRect.left + 16, mouseRect.top + 16);
                    
                    // Удаляем мышь
                    gameContainer.removeChild(mouse.element);
                    mice.splice(index, 1);
                    
                    // Увеличиваем счет
                    score++;
                    scoreElement.textContent = score;
                    
                    // Вибрация на поддерживаемых устройствах
                    if (navigator.vibrate) {
                        navigator.vibrate(50);
                    }
                }
            });
        }

        function createCatchEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'catch-effect';
            effect.style.left = (x - 25) + 'px';
            effect.style.top = (y - 25) + 'px';
            gameContainer.appendChild(effect);
            
            setTimeout(() => {
                if (gameContainer.contains(effect)) {
                    gameContainer.removeChild(effect);
                }
            }, 500);
        }

        // Спавним мышей каждые 2-4 секунды
        function spawnMice() {
            const maxMice = window.innerWidth < 768 ? 3 : 5; // Меньше мышей на мобильных
            
            if (mice.length < maxMice) {
                createMouse();
            }
            
            const nextSpawn = Math.random() * 2000 + 2000; // 2-4 секунды
            setTimeout(spawnMice, nextSpawn);
        }

        // Игровой цикл
        function gameLoop() {
            checkCollisions();
            requestAnimationFrame(gameLoop);
        }

        // Обработка изменения ориентации
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                // Обновляем позицию кота при изменении ориентации
                catPosition.x = Math.min(catPosition.x, window.innerWidth - 80);
                catPosition.y = Math.min(catPosition.y, window.innerHeight - 90);
                updateCatPosition();
            }, 100);
        });

        // Предотвращаем прокрутку страницы
        document.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });

        // Запускаем игру
        setTimeout(spawnMice, 1000); // Первая мышь через секунду
        gameLoop();

        // Создаем первую мышь сразу
        createMouse();
    </script>
</body>
</html>